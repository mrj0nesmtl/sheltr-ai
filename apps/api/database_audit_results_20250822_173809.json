{
  "audit_metadata": {
    "start_time": "2025-08-22T17:38:07.886213",
    "dry_run": false,
    "fix_issues": false,
    "auditor_version": "2.0_enhanced",
    "session": "SESSION-12_DATABASE_AUDIT",
    "end_time": "2025-08-22T17:38:09.927606",
    "duration_seconds": 2.04
  },
  "collections": {
    "existing_collections": [
      "appointments",
      "chat_sessions",
      "demo_analytics",
      "demo_donations",
      "demo_participants",
      "knowledge_chunks",
      "knowledge_documents",
      "newsletter_signups",
      "services",
      "shelters",
      "system_health",
      "tenants",
      "test",
      "translations",
      "users"
    ],
    "missing_collections": [
      "blog_posts",
      "blog_categories",
      "blog_tags",
      "participants",
      "donations",
      "transactions",
      "agent_configurations",
      "feature_flags",
      "system_alerts",
      "platform_metrics",
      "user_profiles",
      "shelter_services"
    ],
    "extra_collections": [
      "demo_analytics",
      "demo_donations",
      "demo_participants",
      "system_health",
      "test",
      "translations"
    ],
    "collection_details": {
      "appointments": {
        "document_count": 3,
        "sample_schemas": [
          {
            "doc_id": "024762fa-3d09-47f0-a716-75aeff993460",
            "fields": [
              "duration_minutes",
              "status",
              "participant_id",
              "provider",
              "scheduled_time",
              "service_name",
              "service_id",
              "tenant_id",
              "id",
              "shelter_id",
              "location",
              "notes",
              "booked_by",
              "created_at"
            ],
            "field_types": {
              "duration_minutes": "int",
              "status": "str",
              "participant_id": "str",
              "provider": "str",
              "scheduled_time": "DatetimeWithNanoseconds",
              "service_name": "str",
              "service_id": "str",
              "tenant_id": "NoneType",
              "id": "str",
              "shelter_id": "str",
              "location": "str",
              "notes": "NoneType",
              "booked_by": "str",
              "created_at": "DatetimeWithNanoseconds"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "1898d1d0-6fef-4390-a38f-f4e50b485a87",
            "fields": [
              "duration_minutes",
              "status",
              "participant_id",
              "provider",
              "scheduled_time",
              "service_name",
              "service_id",
              "tenant_id",
              "id",
              "shelter_id",
              "location",
              "notes",
              "booked_by",
              "created_at"
            ],
            "field_types": {
              "duration_minutes": "int",
              "status": "str",
              "participant_id": "str",
              "provider": "str",
              "scheduled_time": "DatetimeWithNanoseconds",
              "service_name": "str",
              "service_id": "str",
              "tenant_id": "NoneType",
              "id": "str",
              "shelter_id": "str",
              "location": "str",
              "notes": "NoneType",
              "booked_by": "str",
              "created_at": "DatetimeWithNanoseconds"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "6c73a710-9272-4d0f-b4ae-35b99a191e09",
            "fields": [
              "duration_minutes",
              "status",
              "participant_id",
              "provider",
              "scheduled_time",
              "service_name",
              "service_id",
              "tenant_id",
              "id",
              "shelter_id",
              "location",
              "notes",
              "booked_by",
              "created_at"
            ],
            "field_types": {
              "duration_minutes": "int",
              "status": "str",
              "participant_id": "str",
              "provider": "str",
              "scheduled_time": "DatetimeWithNanoseconds",
              "service_name": "str",
              "service_id": "str",
              "tenant_id": "NoneType",
              "id": "str",
              "shelter_id": "str",
              "location": "str",
              "notes": "NoneType",
              "booked_by": "str",
              "created_at": "DatetimeWithNanoseconds"
            },
            "has_timestamps": true
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": true,
          "has_metadata": true
        }
      },
      "chat_sessions": {
        "document_count": 3,
        "sample_schemas": [
          {
            "doc_id": "1XQgid1fyZ3BxJ8M1dLf",
            "fields": [
              "status",
              "agent_type",
              "model",
              "created_at",
              "message_count",
              "updated_at",
              "user_id",
              "title"
            ],
            "field_types": {
              "status": "str",
              "agent_type": "str",
              "model": "str",
              "created_at": "DatetimeWithNanoseconds",
              "message_count": "int",
              "updated_at": "DatetimeWithNanoseconds",
              "user_id": "str",
              "title": "str"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "6v9d9Crxw0CTs8DvE9zu",
            "fields": [
              "status",
              "agent_type",
              "model",
              "created_at",
              "message_count",
              "updated_at",
              "user_id",
              "title"
            ],
            "field_types": {
              "status": "str",
              "agent_type": "str",
              "model": "str",
              "created_at": "DatetimeWithNanoseconds",
              "message_count": "int",
              "updated_at": "DatetimeWithNanoseconds",
              "user_id": "str",
              "title": "str"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "AMgTslfiqww0jCTBEolE",
            "fields": [
              "status",
              "agent_type",
              "model",
              "created_at",
              "message_count",
              "updated_at",
              "user_id",
              "title"
            ],
            "field_types": {
              "status": "str",
              "agent_type": "str",
              "model": "str",
              "created_at": "DatetimeWithNanoseconds",
              "message_count": "int",
              "updated_at": "DatetimeWithNanoseconds",
              "user_id": "str",
              "title": "str"
            },
            "has_timestamps": true
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": true,
          "has_metadata": true
        }
      },
      "demo_analytics": {
        "document_count": 44,
        "sample_schemas": [
          {
            "doc_id": "2EsL46MxCs1v2SPFKs1J",
            "fields": [
              "timestamp",
              "donation_id",
              "participant_id",
              "metadata",
              "demo",
              "event_type"
            ],
            "field_types": {
              "timestamp": "DatetimeWithNanoseconds",
              "donation_id": "NoneType",
              "participant_id": "str",
              "metadata": "dict",
              "demo": "bool",
              "event_type": "str"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "3An8Sb6zYuar92F8MsAD",
            "fields": [
              "event_type",
              "timestamp",
              "participant_id",
              "metadata",
              "session_id"
            ],
            "field_types": {
              "event_type": "str",
              "timestamp": "DatetimeWithNanoseconds",
              "participant_id": "str",
              "metadata": "dict",
              "session_id": "str"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "6F80T7DXIWofbfT4hZu0",
            "fields": [
              "event_type",
              "timestamp",
              "participant_id",
              "metadata",
              "session_id"
            ],
            "field_types": {
              "event_type": "str",
              "timestamp": "DatetimeWithNanoseconds",
              "participant_id": "str",
              "metadata": "dict",
              "session_id": "str"
            },
            "has_timestamps": true
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": false,
          "has_metadata": true
        }
      },
      "demo_donations": {
        "document_count": 18,
        "sample_schemas": [
          {
            "doc_id": "14ac5ec6-948a-434e-aa8f-a25479cffe29",
            "fields": [
              "status",
              "demo_session_id",
              "donor_info",
              "participant_id",
              "payment_data",
              "created_at",
              "shelter_id",
              "id",
              "amount",
              "participant_name"
            ],
            "field_types": {
              "status": "str",
              "demo_session_id": "NoneType",
              "donor_info": "dict",
              "participant_id": "str",
              "payment_data": "dict",
              "created_at": "DatetimeWithNanoseconds",
              "shelter_id": "str",
              "id": "str",
              "amount": "dict",
              "participant_name": "str"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "1bd646a7-e35b-4a05-b200-6dbefe1f2782",
            "fields": [
              "status",
              "demo_session_id",
              "donor_info",
              "participant_id",
              "payment_data",
              "created_at",
              "shelter_id",
              "id",
              "amount",
              "participant_name"
            ],
            "field_types": {
              "status": "str",
              "demo_session_id": "NoneType",
              "donor_info": "dict",
              "participant_id": "str",
              "payment_data": "dict",
              "created_at": "DatetimeWithNanoseconds",
              "shelter_id": "str",
              "id": "str",
              "amount": "dict",
              "participant_name": "str"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "26544024-3b85-46de-8804-aec7a924742d",
            "fields": [
              "status",
              "demo_session_id",
              "donor_info",
              "payment_data",
              "participant_id",
              "created_at",
              "shelter_id",
              "id",
              "amount",
              "participant_name"
            ],
            "field_types": {
              "status": "str",
              "demo_session_id": "NoneType",
              "donor_info": "dict",
              "payment_data": "dict",
              "participant_id": "str",
              "created_at": "DatetimeWithNanoseconds",
              "shelter_id": "str",
              "id": "str",
              "amount": "dict",
              "participant_name": "str"
            },
            "has_timestamps": true
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": true,
          "has_metadata": true
        }
      },
      "demo_participants": {
        "document_count": 8,
        "sample_schemas": [
          {
            "doc_id": "1",
            "fields": [
              "skills",
              "case_worker",
              "firstName",
              "photo_url",
              "age",
              "created_at",
              "story",
              "progress",
              "tenant_id",
              "updated_at",
              "shelter_id",
              "location",
              "featured",
              "goals",
              "total_received",
              "shelter_name",
              "status",
              "donation_count",
              "id",
              "lastName",
              "demo",
              "services_completed",
              "interests",
              "qr_code",
              "emergency_contact"
            ],
            "field_types": {
              "skills": "list",
              "case_worker": "dict",
              "firstName": "str",
              "photo_url": "str",
              "age": "int",
              "created_at": "DatetimeWithNanoseconds",
              "story": "str",
              "progress": "int",
              "tenant_id": "str",
              "updated_at": "DatetimeWithNanoseconds",
              "shelter_id": "str",
              "location": "dict",
              "featured": "bool",
              "goals": "list",
              "total_received": "float",
              "shelter_name": "str",
              "status": "str",
              "donation_count": "int",
              "id": "str",
              "lastName": "str",
              "demo": "bool",
              "services_completed": "int",
              "interests": "list",
              "qr_code": "str",
              "emergency_contact": "dict"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "2",
            "fields": [
              "skills",
              "case_worker",
              "firstName",
              "photo_url",
              "age",
              "created_at",
              "story",
              "progress",
              "tenant_id",
              "updated_at",
              "shelter_id",
              "location",
              "featured",
              "goals",
              "total_received",
              "shelter_name",
              "status",
              "donation_count",
              "id",
              "lastName",
              "demo",
              "services_completed",
              "interests",
              "qr_code",
              "emergency_contact"
            ],
            "field_types": {
              "skills": "list",
              "case_worker": "dict",
              "firstName": "str",
              "photo_url": "str",
              "age": "int",
              "created_at": "DatetimeWithNanoseconds",
              "story": "str",
              "progress": "int",
              "tenant_id": "str",
              "updated_at": "DatetimeWithNanoseconds",
              "shelter_id": "str",
              "location": "dict",
              "featured": "bool",
              "goals": "list",
              "total_received": "float",
              "shelter_name": "str",
              "status": "str",
              "donation_count": "int",
              "id": "str",
              "lastName": "str",
              "demo": "bool",
              "services_completed": "int",
              "interests": "list",
              "qr_code": "str",
              "emergency_contact": "dict"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "3",
            "fields": [
              "skills",
              "case_worker",
              "firstName",
              "photo_url",
              "age",
              "created_at",
              "story",
              "progress",
              "tenant_id",
              "updated_at",
              "shelter_id",
              "location",
              "featured",
              "goals",
              "total_received",
              "shelter_name",
              "status",
              "donation_count",
              "id",
              "lastName",
              "demo",
              "services_completed",
              "interests",
              "qr_code",
              "emergency_contact"
            ],
            "field_types": {
              "skills": "list",
              "case_worker": "dict",
              "firstName": "str",
              "photo_url": "str",
              "age": "int",
              "created_at": "DatetimeWithNanoseconds",
              "story": "str",
              "progress": "int",
              "tenant_id": "str",
              "updated_at": "DatetimeWithNanoseconds",
              "shelter_id": "str",
              "location": "dict",
              "featured": "bool",
              "goals": "list",
              "total_received": "float",
              "shelter_name": "str",
              "status": "str",
              "donation_count": "int",
              "id": "str",
              "lastName": "str",
              "demo": "bool",
              "services_completed": "int",
              "interests": "list",
              "qr_code": "str",
              "emergency_contact": "dict"
            },
            "has_timestamps": true
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": true,
          "has_metadata": true
        }
      },
      "knowledge_chunks": {
        "document_count": 124,
        "sample_schemas": [
          {
            "doc_id": "0RDeGx79q1aV3N7SiIDU",
            "fields": [
              "token_count",
              "metadata",
              "chunk_index",
              "created_at",
              "content",
              "document_id",
              "embedding",
              "char_count"
            ],
            "field_types": {
              "token_count": "int",
              "metadata": "dict",
              "chunk_index": "int",
              "created_at": "DatetimeWithNanoseconds",
              "content": "str",
              "document_id": "str",
              "embedding": "list",
              "char_count": "int"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "0SIGeyI6O8QkKG31Jazc",
            "fields": [
              "token_count",
              "metadata",
              "chunk_index",
              "created_at",
              "content",
              "document_id",
              "embedding",
              "char_count"
            ],
            "field_types": {
              "token_count": "int",
              "metadata": "dict",
              "chunk_index": "int",
              "created_at": "DatetimeWithNanoseconds",
              "content": "str",
              "document_id": "str",
              "embedding": "list",
              "char_count": "int"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "0iZgAkxzFcEaDzEN33ys",
            "fields": [
              "token_count",
              "metadata",
              "chunk_index",
              "created_at",
              "content",
              "document_id",
              "embedding",
              "char_count"
            ],
            "field_types": {
              "token_count": "int",
              "metadata": "dict",
              "chunk_index": "int",
              "created_at": "DatetimeWithNanoseconds",
              "content": "str",
              "document_id": "str",
              "embedding": "list",
              "char_count": "int"
            },
            "has_timestamps": true
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": true,
          "has_metadata": true
        }
      },
      "knowledge_documents": {
        "document_count": 20,
        "sample_schemas": [
          {
            "doc_id": "6HHoaWQMyp7U4i7TnGKy",
            "fields": [
              "description",
              "embedding_count",
              "file_size",
              "metadata",
              "file_name",
              "access_level",
              "title",
              "shelter_id",
              "updated_at",
              "tags",
              "file_type",
              "word_count",
              "file_path",
              "language",
              "uploaded_at",
              "content_hash",
              "categories",
              "category",
              "uploaded_by",
              "processing_error",
              "processed",
              "summary"
            ],
            "field_types": {
              "description": "str",
              "embedding_count": "int",
              "file_size": "int",
              "metadata": "dict",
              "file_name": "str",
              "access_level": "str",
              "title": "str",
              "shelter_id": "NoneType",
              "updated_at": "DatetimeWithNanoseconds",
              "tags": "list",
              "file_type": "str",
              "word_count": "int",
              "file_path": "str",
              "language": "str",
              "uploaded_at": "DatetimeWithNanoseconds",
              "content_hash": "str",
              "categories": "list",
              "category": "str",
              "uploaded_by": "str",
              "processing_error": "NoneType",
              "processed": "bool",
              "summary": "str"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "7n7KvZTTPgPqwQrBxWY2",
            "fields": [
              "summary",
              "embedding_count",
              "file_size",
              "metadata",
              "file_name",
              "shelter_id",
              "title",
              "access_level",
              "updated_at",
              "tags",
              "file_path",
              "language",
              "word_count",
              "file_type",
              "uploaded_at",
              "category",
              "categories",
              "processing_error",
              "uploaded_by",
              "content_hash",
              "processed",
              "description"
            ],
            "field_types": {
              "summary": "str",
              "embedding_count": "int",
              "file_size": "int",
              "metadata": "dict",
              "file_name": "str",
              "shelter_id": "NoneType",
              "title": "str",
              "access_level": "str",
              "updated_at": "DatetimeWithNanoseconds",
              "tags": "list",
              "file_path": "str",
              "language": "str",
              "word_count": "int",
              "file_type": "str",
              "uploaded_at": "DatetimeWithNanoseconds",
              "category": "str",
              "categories": "list",
              "processing_error": "NoneType",
              "uploaded_by": "str",
              "content_hash": "str",
              "processed": "bool",
              "description": "str"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "8bzVehuA2tIOgVXwr3IN",
            "fields": [
              "description",
              "embedding_count",
              "file_size",
              "metadata",
              "file_name",
              "access_level",
              "title",
              "shelter_id",
              "updated_at",
              "tags",
              "file_type",
              "word_count",
              "file_path",
              "language",
              "uploaded_at",
              "content_hash",
              "categories",
              "category",
              "uploaded_by",
              "processing_error",
              "processed",
              "summary"
            ],
            "field_types": {
              "description": "str",
              "embedding_count": "int",
              "file_size": "int",
              "metadata": "dict",
              "file_name": "str",
              "access_level": "str",
              "title": "str",
              "shelter_id": "NoneType",
              "updated_at": "DatetimeWithNanoseconds",
              "tags": "list",
              "file_type": "str",
              "word_count": "int",
              "file_path": "str",
              "language": "str",
              "uploaded_at": "DatetimeWithNanoseconds",
              "content_hash": "str",
              "categories": "list",
              "category": "str",
              "uploaded_by": "str",
              "processing_error": "NoneType",
              "processed": "bool",
              "summary": "str"
            },
            "has_timestamps": true
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": true,
          "has_metadata": true
        }
      },
      "newsletter_signups": {
        "document_count": 3,
        "sample_schemas": [
          {
            "doc_id": "1envVvNY1QNiHeHx8Kb8",
            "fields": [
              "user_agent",
              "status",
              "signup_date",
              "email",
              "source",
              "page"
            ],
            "field_types": {
              "user_agent": "str",
              "status": "str",
              "signup_date": "DatetimeWithNanoseconds",
              "email": "str",
              "source": "str",
              "page": "str"
            },
            "has_timestamps": false
          },
          {
            "doc_id": "MYOfrgZx997iccf6CDZa",
            "fields": [
              "user_agent",
              "ip_address",
              "status",
              "signup_date",
              "email",
              "source",
              "page"
            ],
            "field_types": {
              "user_agent": "str",
              "ip_address": "NoneType",
              "status": "str",
              "signup_date": "DatetimeWithNanoseconds",
              "email": "str",
              "source": "str",
              "page": "str"
            },
            "has_timestamps": false
          },
          {
            "doc_id": "mSGIJmdytMJFFNGWJUq5",
            "fields": [
              "user_agent",
              "ip_address",
              "status",
              "signup_date",
              "email",
              "source",
              "page"
            ],
            "field_types": {
              "user_agent": "str",
              "ip_address": "NoneType",
              "status": "str",
              "signup_date": "DatetimeWithNanoseconds",
              "email": "str",
              "source": "str",
              "page": "str"
            },
            "has_timestamps": false
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": false,
          "has_metadata": false
        }
      },
      "services": {
        "document_count": 6,
        "sample_schemas": [
          {
            "doc_id": "computer-training",
            "fields": [
              "rating",
              "created_at",
              "tenant_id",
              "id",
              "updated_at",
              "total_ratings",
              "location",
              "max_capacity",
              "shelter_id",
              "duration_minutes",
              "requirements",
              "provider",
              "category",
              "name",
              "created_by",
              "description"
            ],
            "field_types": {
              "rating": "float",
              "created_at": "DatetimeWithNanoseconds",
              "tenant_id": "str",
              "id": "str",
              "updated_at": "DatetimeWithNanoseconds",
              "total_ratings": "int",
              "location": "str",
              "max_capacity": "int",
              "shelter_id": "str",
              "duration_minutes": "int",
              "requirements": "list",
              "provider": "str",
              "category": "str",
              "name": "str",
              "created_by": "str",
              "description": "str"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "counseling-individual",
            "fields": [
              "rating",
              "created_at",
              "tenant_id",
              "id",
              "updated_at",
              "total_ratings",
              "location",
              "max_capacity",
              "shelter_id",
              "duration_minutes",
              "requirements",
              "provider",
              "category",
              "name",
              "created_by",
              "description"
            ],
            "field_types": {
              "rating": "float",
              "created_at": "DatetimeWithNanoseconds",
              "tenant_id": "str",
              "id": "str",
              "updated_at": "DatetimeWithNanoseconds",
              "total_ratings": "int",
              "location": "str",
              "max_capacity": "int",
              "shelter_id": "str",
              "duration_minutes": "int",
              "requirements": "list",
              "provider": "str",
              "category": "str",
              "name": "str",
              "created_by": "str",
              "description": "str"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "financial-literacy",
            "fields": [
              "rating",
              "created_at",
              "tenant_id",
              "id",
              "updated_at",
              "total_ratings",
              "location",
              "max_capacity",
              "shelter_id",
              "duration_minutes",
              "requirements",
              "provider",
              "category",
              "name",
              "created_by",
              "description"
            ],
            "field_types": {
              "rating": "float",
              "created_at": "DatetimeWithNanoseconds",
              "tenant_id": "str",
              "id": "str",
              "updated_at": "DatetimeWithNanoseconds",
              "total_ratings": "int",
              "location": "str",
              "max_capacity": "int",
              "shelter_id": "str",
              "duration_minutes": "int",
              "requirements": "list",
              "provider": "str",
              "category": "str",
              "name": "str",
              "created_by": "str",
              "description": "str"
            },
            "has_timestamps": true
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": true,
          "has_metadata": true
        }
      },
      "shelters": {
        "document_count": 16,
        "sample_schemas": [
          {
            "doc_id": "7qGDhXSxiZfguEi16TSr",
            "fields": [
              "status",
              "address",
              "services",
              "created_at",
              "admin_uid",
              "website",
              "contact_email",
              "name",
              "contact_phone",
              "capacity"
            ],
            "field_types": {
              "status": "str",
              "address": "str",
              "services": "list",
              "created_at": "DatetimeWithNanoseconds",
              "admin_uid": "NoneType",
              "website": "str",
              "contact_email": "str",
              "name": "str",
              "contact_phone": "str",
              "capacity": "int"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "LP9bXOlfveADxEX4pf4z",
            "fields": [
              "status",
              "address",
              "services",
              "created_at",
              "admin_uid",
              "website",
              "contact_email",
              "name",
              "contact_phone",
              "capacity"
            ],
            "field_types": {
              "status": "str",
              "address": "str",
              "services": "list",
              "created_at": "DatetimeWithNanoseconds",
              "admin_uid": "NoneType",
              "website": "str",
              "contact_email": "str",
              "name": "str",
              "contact_phone": "str",
              "capacity": "int"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "OVuOQgHdEAlhZCUUSvni",
            "fields": [
              "status",
              "address",
              "services",
              "created_at",
              "admin_uid",
              "website",
              "contact_email",
              "name",
              "contact_phone",
              "capacity"
            ],
            "field_types": {
              "status": "str",
              "address": "str",
              "services": "list",
              "created_at": "DatetimeWithNanoseconds",
              "admin_uid": "NoneType",
              "website": "str",
              "contact_email": "str",
              "name": "str",
              "contact_phone": "str",
              "capacity": "int"
            },
            "has_timestamps": true
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": true,
          "has_metadata": true
        }
      },
      "system_health": {
        "document_count": 2,
        "sample_schemas": [
          {
            "doc_id": "55tULjJ4XIcODwAVLz1j",
            "fields": [
              "tenantId",
              "status",
              "metrics",
              "alerts",
              "timestamp",
              "aiInsights",
              "reportedBy"
            ],
            "field_types": {
              "tenantId": "str",
              "status": "str",
              "metrics": "dict",
              "alerts": "list",
              "timestamp": "DatetimeWithNanoseconds",
              "aiInsights": "dict",
              "reportedBy": "str"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "dJQvpXzcI0MRN3Za2FBR",
            "fields": [
              "tenantId",
              "status",
              "metrics",
              "alerts",
              "timestamp",
              "aiInsights",
              "reportedBy"
            ],
            "field_types": {
              "tenantId": "str",
              "status": "str",
              "metrics": "dict",
              "alerts": "list",
              "timestamp": "DatetimeWithNanoseconds",
              "aiInsights": "dict",
              "reportedBy": "str"
            },
            "has_timestamps": true
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": true,
          "has_metadata": true
        }
      },
      "tenants": {
        "document_count": 2,
        "sample_schemas": [
          {
            "doc_id": "Vc48fjy0cajJrstbLQRr",
            "fields": [
              "status",
              "createdBy",
              "settings",
              "organization",
              "security",
              "subscription",
              "createdAt",
              "name",
              "type",
              "updatedAt"
            ],
            "field_types": {
              "status": "str",
              "createdBy": "str",
              "settings": "dict",
              "organization": "dict",
              "security": "dict",
              "subscription": "dict",
              "createdAt": "DatetimeWithNanoseconds",
              "name": "str",
              "type": "str",
              "updatedAt": "DatetimeWithNanoseconds"
            },
            "has_timestamps": false
          },
          {
            "doc_id": "jUOTh8Vhr8JX2CkAeZGi",
            "fields": [
              "status",
              "createdBy",
              "settings",
              "organization",
              "security",
              "subscription",
              "createdAt",
              "name",
              "type",
              "updatedAt"
            ],
            "field_types": {
              "status": "str",
              "createdBy": "str",
              "settings": "dict",
              "organization": "dict",
              "security": "dict",
              "subscription": "dict",
              "createdAt": "DatetimeWithNanoseconds",
              "name": "str",
              "type": "str",
              "updatedAt": "DatetimeWithNanoseconds"
            },
            "has_timestamps": false
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": true,
          "has_metadata": false
        }
      },
      "test": {
        "document_count": 1,
        "sample_schemas": [
          {
            "doc_id": "connection-test",
            "fields": [
              "test",
              "timestamp",
              "user"
            ],
            "field_types": {
              "test": "bool",
              "timestamp": "str",
              "user": "str"
            },
            "has_timestamps": true
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": true,
          "has_metadata": true
        }
      },
      "translations": {
        "document_count": 8,
        "sample_schemas": [
          {
            "doc_id": "DT40joOMRRaz125iQ7U8",
            "fields": [
              "quality",
              "language",
              "context",
              "createdAt",
              "key",
              "content",
              "updatedAt",
              "version"
            ],
            "field_types": {
              "quality": "dict",
              "language": "str",
              "context": "dict",
              "createdAt": "DatetimeWithNanoseconds",
              "key": "str",
              "content": "str",
              "updatedAt": "DatetimeWithNanoseconds",
              "version": "int"
            },
            "has_timestamps": false
          },
          {
            "doc_id": "IDGM6vcsydjhHltLumUP",
            "fields": [
              "quality",
              "language",
              "context",
              "createdAt",
              "key",
              "content",
              "updatedAt",
              "version"
            ],
            "field_types": {
              "quality": "dict",
              "language": "str",
              "context": "dict",
              "createdAt": "DatetimeWithNanoseconds",
              "key": "str",
              "content": "str",
              "updatedAt": "DatetimeWithNanoseconds",
              "version": "int"
            },
            "has_timestamps": false
          },
          {
            "doc_id": "VRpRod7cWfbXMMqZlRvk",
            "fields": [
              "quality",
              "language",
              "context",
              "createdAt",
              "key",
              "content",
              "updatedAt",
              "version"
            ],
            "field_types": {
              "quality": "dict",
              "language": "str",
              "context": "dict",
              "createdAt": "DatetimeWithNanoseconds",
              "key": "str",
              "content": "str",
              "updatedAt": "DatetimeWithNanoseconds",
              "version": "int"
            },
            "has_timestamps": false
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": true,
          "has_metadata": false
        }
      },
      "users": {
        "document_count": 9,
        "sample_schemas": [
          {
            "doc_id": "4uFBYGFWEehnsOzilYxZ0n2tif02",
            "fields": [
              "firstName",
              "uid",
              "lastLoginAt",
              "createdAt",
              "tenant_id",
              "updated_at",
              "lastName",
              "shelter_id",
              "phone",
              "profileComplete",
              "shelterId",
              "status",
              "shelter_role",
              "email",
              "role",
              "emailVerified",
              "name"
            ],
            "field_types": {
              "firstName": "str",
              "uid": "str",
              "lastLoginAt": "str",
              "createdAt": "str",
              "tenant_id": "str",
              "updated_at": "DatetimeWithNanoseconds",
              "lastName": "str",
              "shelter_id": "str",
              "phone": "str",
              "profileComplete": "bool",
              "shelterId": "NoneType",
              "status": "str",
              "shelter_role": "str",
              "email": "str",
              "role": "str",
              "emailVerified": "bool",
              "name": "str"
            },
            "has_timestamps": true
          },
          {
            "doc_id": "7zCc7f2XZaarqD9sss3hvae1LbN2",
            "fields": [
              "status",
              "firstName",
              "organizationName",
              "uid",
              "lastLoginAt",
              "createdAt",
              "email",
              "role",
              "lastName",
              "permissions",
              "organizationId",
              "updatedAt",
              "profileComplete"
            ],
            "field_types": {
              "status": "str",
              "firstName": "str",
              "organizationName": "str",
              "uid": "str",
              "lastLoginAt": "str",
              "createdAt": "str",
              "email": "str",
              "role": "str",
              "lastName": "str",
              "permissions": "list",
              "organizationId": "str",
              "updatedAt": "str",
              "profileComplete": "bool"
            },
            "has_timestamps": false
          },
          {
            "doc_id": "UbNhjY35yXWVpctEyusVkbIjjtJ2",
            "fields": [
              "firstName",
              "preferences",
              "uid",
              "createdAt",
              "lastName",
              "lastActivity",
              "updatedAt",
              "status",
              "profile",
              "email",
              "permissions",
              "displayName",
              "role",
              "security",
              "tenantId"
            ],
            "field_types": {
              "firstName": "str",
              "preferences": "dict",
              "uid": "str",
              "createdAt": "DatetimeWithNanoseconds",
              "lastName": "str",
              "lastActivity": "DatetimeWithNanoseconds",
              "updatedAt": "str",
              "status": "str",
              "profile": "dict",
              "email": "str",
              "permissions": "list",
              "displayName": "str",
              "role": "str",
              "security": "dict",
              "tenantId": "str"
            },
            "has_timestamps": false
          }
        ],
        "status": "existing",
        "analysis": {
          "has_data": true,
          "schema_consistent": false,
          "has_metadata": true
        }
      }
    },
    "categorization": {
      "core": [
        "users",
        "shelters",
        "services"
      ],
      "demo": [
        "demo_analytics",
        "demo_donations",
        "demo_participants"
      ],
      "system": [
        "tenants",
        "translations",
        "test",
        "system_health"
      ],
      "content": [
        "chat_sessions",
        "knowledge_chunks",
        "knowledge_documents"
      ],
      "other": [
        "appointments",
        "chat_sessions",
        "knowledge_chunks",
        "knowledge_documents",
        "newsletter_signups"
      ]
    },
    "summary": {
      "total_existing": 15,
      "total_missing": 12,
      "total_documented": 21,
      "total_with_data": 15,
      "coverage_percentage": 71.4
    }
  },
  "storage": {
    "actual_structure": {
      "knowledge-base": {
        "public": {
          "README.md": {
            "type": "file",
            "size": 8872,
            "updated": "2025-08-21T05:48:53.488000+00:00",
            "content_type": "application/octet-stream"
          },
          "blockchain.md": {
            "type": "file",
            "size": 27271,
            "updated": "2025-08-21T05:49:36.419000+00:00",
            "content_type": "application/octet-stream"
          },
          "donor-guide.md": {
            "type": "file",
            "size": 20720,
            "updated": "2025-08-21T05:49:00.551000+00:00",
            "content_type": "application/octet-stream"
          },
          "hacking_homelessness.md": {
            "type": "file",
            "size": 25446,
            "updated": "2025-08-21T05:48:46.298000+00:00",
            "content_type": "application/octet-stream"
          },
          "participant-guide.md": {
            "type": "file",
            "size": 10866,
            "updated": "2025-08-21T05:48:57.221000+00:00",
            "content_type": "application/octet-stream"
          },
          "shelter-admin-guide.md": {
            "type": "file",
            "size": 19338,
            "updated": "2025-08-21T05:49:10.392000+00:00",
            "content_type": "application/octet-stream"
          },
          "sheltr-tokenomics.md": {
            "type": "file",
            "size": 17337,
            "updated": "2025-08-21T05:49:06.025000+00:00",
            "content_type": "application/octet-stream"
          },
          "system-design.md": {
            "type": "file",
            "size": 38118,
            "updated": "2025-08-21T05:49:15.206000+00:00",
            "content_type": "application/octet-stream"
          },
          "whitepaper_final.md": {
            "type": "file",
            "size": 36059,
            "updated": "2025-08-21T05:49:25.360000+00:00",
            "content_type": "application/octet-stream"
          }
        }
      },
      "profiles": {
        "dFJNlIh2g4R8vAvxvIvWZtwu8zw1": {
          "avatar.png": {
            "type": "file",
            "size": 4772,
            "updated": "2025-08-10T21:52:15.935000+00:00",
            "content_type": "image/png"
          }
        }
      }
    },
    "documented_structure": {
      "knowledge-base": {
        "public": {
          "description": "Public knowledge documents"
        },
        "internal": {
          "description": "Internal documentation"
        },
        "shelter-specific": {
          "description": "Shelter-specific documents"
        },
        "embeddings": {
          "description": "Document embeddings and vectors"
        }
      },
      "uploads": {
        "processing": {
          "description": "Files being processed"
        },
        "failed": {
          "description": "Failed upload attempts"
        },
        "completed": {
          "description": "Successfully processed uploads"
        }
      },
      "processed": {
        "documents": {
          "description": "Processed document files"
        },
        "summaries": {
          "description": "Generated document summaries"
        },
        "extracted-text": {
          "description": "Extracted text content"
        }
      },
      "profiles": {
        "avatars": {
          "description": "User profile avatars"
        },
        "documents": {
          "description": "User uploaded documents"
        }
      },
      "blog": {
        "images": {
          "description": "Blog post images"
        },
        "media": {
          "description": "Blog media files"
        }
      }
    },
    "file_details": [
      {
        "name": "knowledge-base/public/README.md",
        "size": 8872,
        "size_mb": 0.01,
        "updated": "2025-08-21T05:48:53.488000+00:00",
        "content_type": "application/octet-stream",
        "directory": "knowledge-base/public",
        "extension": ".md"
      },
      {
        "name": "knowledge-base/public/blockchain.md",
        "size": 27271,
        "size_mb": 0.03,
        "updated": "2025-08-21T05:49:36.419000+00:00",
        "content_type": "application/octet-stream",
        "directory": "knowledge-base/public",
        "extension": ".md"
      },
      {
        "name": "knowledge-base/public/donor-guide.md",
        "size": 20720,
        "size_mb": 0.02,
        "updated": "2025-08-21T05:49:00.551000+00:00",
        "content_type": "application/octet-stream",
        "directory": "knowledge-base/public",
        "extension": ".md"
      },
      {
        "name": "knowledge-base/public/hacking_homelessness.md",
        "size": 25446,
        "size_mb": 0.02,
        "updated": "2025-08-21T05:48:46.298000+00:00",
        "content_type": "application/octet-stream",
        "directory": "knowledge-base/public",
        "extension": ".md"
      },
      {
        "name": "knowledge-base/public/participant-guide.md",
        "size": 10866,
        "size_mb": 0.01,
        "updated": "2025-08-21T05:48:57.221000+00:00",
        "content_type": "application/octet-stream",
        "directory": "knowledge-base/public",
        "extension": ".md"
      },
      {
        "name": "knowledge-base/public/shelter-admin-guide.md",
        "size": 19338,
        "size_mb": 0.02,
        "updated": "2025-08-21T05:49:10.392000+00:00",
        "content_type": "application/octet-stream",
        "directory": "knowledge-base/public",
        "extension": ".md"
      },
      {
        "name": "knowledge-base/public/sheltr-tokenomics.md",
        "size": 17337,
        "size_mb": 0.02,
        "updated": "2025-08-21T05:49:06.025000+00:00",
        "content_type": "application/octet-stream",
        "directory": "knowledge-base/public",
        "extension": ".md"
      },
      {
        "name": "knowledge-base/public/system-design.md",
        "size": 38118,
        "size_mb": 0.04,
        "updated": "2025-08-21T05:49:15.206000+00:00",
        "content_type": "application/octet-stream",
        "directory": "knowledge-base/public",
        "extension": ".md"
      },
      {
        "name": "knowledge-base/public/whitepaper_final.md",
        "size": 36059,
        "size_mb": 0.03,
        "updated": "2025-08-21T05:49:25.360000+00:00",
        "content_type": "application/octet-stream",
        "directory": "knowledge-base/public",
        "extension": ".md"
      },
      {
        "name": "profiles/dFJNlIh2g4R8vAvxvIvWZtwu8zw1/avatar.png",
        "size": 4772,
        "size_mb": 0.0,
        "updated": "2025-08-10T21:52:15.935000+00:00",
        "content_type": "image/png",
        "directory": "profiles/dFJNlIh2g4R8vAvxvIvWZtwu8zw1",
        "extension": ".png"
      }
    ],
    "analysis": {
      "total_files": 10,
      "total_size_mb": 0.2,
      "existing_directories": [
        "knowledge-base",
        "profiles"
      ],
      "missing_directories": [
        "uploads",
        "processed",
        "blog"
      ],
      "extra_directories": [],
      "file_types": {
        ".md": 9,
        ".png": 1
      },
      "directories_by_file_count": {
        "knowledge-base": 0,
        "profiles": 0
      }
    },
    "summary": {
      "directories_coverage": 40.0,
      "largest_directory": "knowledge-base",
      "most_common_file_type": ".md"
    }
  },
  "indexes": {
    "required_indexes": [
      {
        "collection": "users",
        "fields": [
          "role",
          "shelter_id",
          "status"
        ],
        "description": "User role and shelter filtering with status",
        "priority": "HIGH",
        "estimated_queries": [
          "role-based dashboards",
          "shelter user lists",
          "active user filtering"
        ]
      },
      {
        "collection": "users",
        "fields": [
          "shelter_id",
          "role",
          "last_active"
        ],
        "description": "Shelter users ordered by activity",
        "priority": "MEDIUM",
        "estimated_queries": [
          "shelter admin views",
          "recent user activity"
        ]
      },
      {
        "collection": "shelters",
        "fields": [
          "status",
          "city",
          "verification_status"
        ],
        "description": "Shelter filtering by status and location",
        "priority": "HIGH",
        "estimated_queries": [
          "active shelters by city",
          "verified shelter lists"
        ]
      },
      {
        "collection": "services",
        "fields": [
          "shelter_id",
          "category",
          "isActive"
        ],
        "description": "Service filtering by shelter and category",
        "priority": "HIGH",
        "estimated_queries": [
          "shelter service listings",
          "category-based search"
        ]
      },
      {
        "collection": "appointments",
        "fields": [
          "participant_id",
          "status",
          "date"
        ],
        "description": "Participant appointments by status and date",
        "priority": "HIGH",
        "estimated_queries": [
          "participant appointment history",
          "upcoming appointments"
        ]
      },
      {
        "collection": "appointments",
        "fields": [
          "service_id",
          "date",
          "status"
        ],
        "description": "Service appointments by date and status",
        "priority": "MEDIUM",
        "estimated_queries": [
          "service booking availability",
          "appointment calendars"
        ]
      },
      {
        "collection": "donations",
        "fields": [
          "participant_id",
          "status",
          "created_at"
        ],
        "description": "Participant donations by status and date",
        "priority": "HIGH",
        "estimated_queries": [
          "participant donation history",
          "recent donations"
        ]
      },
      {
        "collection": "donations",
        "fields": [
          "status",
          "created_at",
          "amount.total"
        ],
        "description": "All donations by status, date, and amount",
        "priority": "MEDIUM",
        "estimated_queries": [
          "donation analytics",
          "financial reporting"
        ]
      },
      {
        "collection": "knowledge_documents",
        "fields": [
          "access_level",
          "categories",
          "uploaded_at"
        ],
        "description": "Knowledge documents by access and category",
        "priority": "HIGH",
        "estimated_queries": [
          "document access control",
          "category browsing"
        ]
      },
      {
        "collection": "chat_sessions",
        "fields": [
          "user_id",
          "created_at",
          "status"
        ],
        "description": "User chat sessions by date and status",
        "priority": "MEDIUM",
        "estimated_queries": [
          "user chat history",
          "session management"
        ]
      },
      {
        "collection": "blog_posts",
        "fields": [
          "status",
          "published_at",
          "category"
        ],
        "description": "Blog posts by status, publication date, and category",
        "priority": "MEDIUM",
        "estimated_queries": [
          "public blog listings",
          "content management"
        ]
      }
    ],
    "query_performance_tests": [
      {
        "collection": "users",
        "field_tested": "role",
        "duration_ms": 44.02,
        "documents_tested": 9,
        "performance_grade": "GOOD"
      },
      {
        "collection": "users",
        "field_tested": "shelter_id",
        "duration_ms": 38.38,
        "documents_tested": 9,
        "performance_grade": "GOOD"
      },
      {
        "collection": "shelters",
        "field_tested": "status",
        "duration_ms": 39.94,
        "documents_tested": 10,
        "performance_grade": "GOOD"
      }
    ],
    "analysis": {
      "total_required_indexes": 11,
      "high_priority_indexes": 6,
      "medium_priority_indexes": 5,
      "collections_needing_indexes": [
        "services",
        "blog_posts",
        "appointments",
        "users",
        "chat_sessions",
        "donations",
        "shelters",
        "knowledge_documents"
      ],
      "performance_issues": []
    },
    "recommendations": {
      "immediate_action": [
        {
          "collection": "users",
          "fields": [
            "role",
            "shelter_id",
            "status"
          ],
          "description": "User role and shelter filtering with status",
          "priority": "HIGH",
          "estimated_queries": [
            "role-based dashboards",
            "shelter user lists",
            "active user filtering"
          ]
        },
        {
          "collection": "shelters",
          "fields": [
            "status",
            "city",
            "verification_status"
          ],
          "description": "Shelter filtering by status and location",
          "priority": "HIGH",
          "estimated_queries": [
            "active shelters by city",
            "verified shelter lists"
          ]
        },
        {
          "collection": "services",
          "fields": [
            "shelter_id",
            "category",
            "isActive"
          ],
          "description": "Service filtering by shelter and category",
          "priority": "HIGH",
          "estimated_queries": [
            "shelter service listings",
            "category-based search"
          ]
        },
        {
          "collection": "appointments",
          "fields": [
            "participant_id",
            "status",
            "date"
          ],
          "description": "Participant appointments by status and date",
          "priority": "HIGH",
          "estimated_queries": [
            "participant appointment history",
            "upcoming appointments"
          ]
        },
        {
          "collection": "donations",
          "fields": [
            "participant_id",
            "status",
            "created_at"
          ],
          "description": "Participant donations by status and date",
          "priority": "HIGH",
          "estimated_queries": [
            "participant donation history",
            "recent donations"
          ]
        },
        {
          "collection": "knowledge_documents",
          "fields": [
            "access_level",
            "categories",
            "uploaded_at"
          ],
          "description": "Knowledge documents by access and category",
          "priority": "HIGH",
          "estimated_queries": [
            "document access control",
            "category browsing"
          ]
        }
      ],
      "next_phase": [
        {
          "collection": "users",
          "fields": [
            "shelter_id",
            "role",
            "last_active"
          ],
          "description": "Shelter users ordered by activity",
          "priority": "MEDIUM",
          "estimated_queries": [
            "shelter admin views",
            "recent user activity"
          ]
        },
        {
          "collection": "appointments",
          "fields": [
            "service_id",
            "date",
            "status"
          ],
          "description": "Service appointments by date and status",
          "priority": "MEDIUM",
          "estimated_queries": [
            "service booking availability",
            "appointment calendars"
          ]
        },
        {
          "collection": "donations",
          "fields": [
            "status",
            "created_at",
            "amount.total"
          ],
          "description": "All donations by status, date, and amount",
          "priority": "MEDIUM",
          "estimated_queries": [
            "donation analytics",
            "financial reporting"
          ]
        },
        {
          "collection": "chat_sessions",
          "fields": [
            "user_id",
            "created_at",
            "status"
          ],
          "description": "User chat sessions by date and status",
          "priority": "MEDIUM",
          "estimated_queries": [
            "user chat history",
            "session management"
          ]
        },
        {
          "collection": "blog_posts",
          "fields": [
            "status",
            "published_at",
            "category"
          ],
          "description": "Blog posts by status, publication date, and category",
          "priority": "MEDIUM",
          "estimated_queries": [
            "public blog listings",
            "content management"
          ]
        }
      ],
      "monitoring_needed": "Set up query performance monitoring after index creation"
    },
    "notes": [
      "Index creation should be done via Firebase Console or firebase deploy --only firestore:indexes",
      "Some indexes may already exist - verify in Firebase Console",
      "Index creation can take time for large collections",
      "Monitor query costs after index implementation"
    ]
  },
  "analysis": {
    "database_health_score": 77.8,
    "critical_issues": [
      "Missing 12 critical collections"
    ],
    "infrastructure_gaps": [
      "Missing storage directories: uploads, processed, blog"
    ],
    "data_quality_concerns": [],
    "performance_issues": [],
    "security_concerns": [],
    "recommendations_priority": {
      "immediate": [],
      "high": [],
      "medium": [],
      "low": []
    }
  },
  "recommendations": {
    "immediate_actions": [
      {
        "action": "Create missing collections",
        "details": "Create 12 missing collections: blog_posts, blog_categories, blog_tags, participants, donations...",
        "priority": "CRITICAL",
        "estimated_time": "1-2 hours"
      },
      {
        "action": "Create high-priority indexes",
        "details": "Create 6 performance-critical indexes",
        "priority": "HIGH",
        "estimated_time": "30 minutes"
      }
    ],
    "next_phase_actions": [
      {
        "action": "Organize storage structure",
        "details": "Create missing directories: uploads, processed, blog",
        "priority": "MEDIUM",
        "estimated_time": "30 minutes"
      }
    ],
    "optimization_actions": [],
    "monitoring_setup": [],
    "estimated_effort": {
      "immediate": "2-4 hours",
      "next_phase": "1-2 hours",
      "optimization": "1-2 hours",
      "monitoring": "30 minutes"
    }
  },
  "status": "COMPLETED"
}