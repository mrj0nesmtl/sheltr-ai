<!DOCTYPE html>
<html>
<head>
    <title>Create Michael's Goals</title>
</head>
<body>
    <h2>Create Goals for Michael Rodriguez</h2>
    <button onclick="createGoals()">Create Real Goals</button>
    <div id="output"></div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, doc, setDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase config (replace with your actual config)
        const firebaseConfig = {
            // Add your Firebase config here
            apiKey: "AIzaSyDGpDgeJYTpLa2XcX8b2Xo-8rL5HrN7Wq4",
            authDomain: "sheltr-ai.firebaseapp.com",
            projectId: "sheltr-ai",
            storageBucket: "sheltr-ai.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcd1234567890ef"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.createGoals = async function() {
            const output = document.getElementById('output');
            output.innerHTML = 'Creating goals...';
            
            try {
                const participantId = 'michael-rodriguez';
                const now = new Date();
                const addDays = (days) => {
                    const date = new Date(now);
                    date.setDate(date.getDate() + days);
                    return date.toISOString().split('T')[0];
                };

                // Goal 1: Housing
                await setDoc(doc(db, 'participant_goals', 'goal_housing_michael'), {
                    id: 'goal_housing_michael',
                    participantId: participantId,
                    title: 'Find Stable Housing',
                    description: 'Secure permanent housing within the next 6 months through Old Brewery Mission housing program',
                    category: 'Housing',
                    targetDate: addDays(180),
                    createdDate: new Date().toISOString(),
                    progress: 45,
                    status: 'active',
                    priority: 'critical',
                    assignedCaseWorker: 'Sarah Johnson',
                    milestones: [
                        {
                            id: 'milestone_1',
                            title: 'Complete Housing Application',
                            description: 'Submit application for subsidized housing program',
                            targetDate: addDays(30),
                            completed: true,
                            completedDate: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString()
                        }
                    ]
                });

                // Goal 2: Employment
                await setDoc(doc(db, 'participant_goals', 'goal_employment_michael'), {
                    id: 'goal_employment_michael',
                    participantId: participantId,
                    title: 'Complete Culinary Arts Certification',
                    description: 'Finish culinary arts training program and secure employment in food service industry',
                    category: 'Employment',
                    targetDate: addDays(90),
                    createdDate: new Date().toISOString(),
                    progress: 75,
                    status: 'active',
                    priority: 'high',
                    assignedCaseWorker: 'Sarah Johnson',
                    milestones: []
                });

                // Goal 3: Financial
                await setDoc(doc(db, 'participant_goals', 'goal_financial_michael'), {
                    id: 'goal_financial_michael',
                    participantId: participantId,
                    title: 'Build Emergency Savings',
                    description: 'Save $1,000 for emergency fund and housing security deposit',
                    category: 'Financial',
                    targetDate: addDays(120),
                    createdDate: new Date().toISOString(),
                    progress: 30,
                    status: 'active',
                    priority: 'medium',
                    assignedCaseWorker: 'Sarah Johnson',
                    milestones: []
                });

                output.innerHTML = '✅ Successfully created 3 goals for Michael Rodriguez!';
            } catch (error) {
                output.innerHTML = '❌ Error: ' + error.message;
                console.error(error);
            }
        };
    </script>
</body>
</html>
